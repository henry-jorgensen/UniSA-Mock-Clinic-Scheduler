@{
    ViewData["Title"] = "Treatment";
    ViewData["Controller"] = "Home";
    AppointmentModel appointment = ViewBag.Appointment;
}

<script src="~/lib/jquery/dist/jquery.js"></script>
<script src="~/js/classes/AJAXManager.js"></script>
<script src="~/js/treatment.js"></script>
<script src="~/js/image-matching.js"></script>

<link rel="stylesheet" type="text/css" href="/css/clinics.css">
<link rel="stylesheet" type="text/css" href="/css/image-matching.css">

<div class="container">
	<main role="main" class="pb-3">
        <h1>Treatment Page</h1>

		@*Back to ClinicDay button - only visible when conducting a clinic*@
		<button id="completeTreatment" class="hidden btn button">Complete Treatment</button>

		<div class="col-sm-12" style="min-width: 200px;">
			<table class="table">
				<thead>
					<tr>
						<th>Date</th>
						<th>Location</th>
						<th>Patient</th>
						<th>Radiation Therapists</th>
						<th>Site</th>
						<th>Treatment Document</th>
					</tr>
				</thead>

				<tbody>
					<tr>
						<td>
							<h6 class="mb-0">@appointment.Time</h6>
							<small>@appointment.Date</small>
						</td>

						<td>
							<h6 class="mb-0">@appointment.Room</h6>
                            <p class="hidden" id="appointmentID">@appointment.AppointmentID</p>
						</td>

						<td>
							<h6 class="mb-0">@appointment.Patient</h6>
						</td>

						<td>
							<p class="mb-0">@appointment.RadiationTherapist1</p>
							<p class="mb-0">@appointment.RadiationTherapist2</p>
						</td>

						<td>
							<h6 class="mb-0">@appointment.Site</h6>
						</td>

						<td>
                            @*Load in the PDF of allow the upload of one*@
							<div class="hidden" id="documentButtons">
                                <a id="downloadLink" target="_blank" href="#" download="Treatment" class="btn button-navigation">Download</a>
                                <button id="deleteDocument" class="btn button-navigation">Delete</button>
                            </div>

							<div id="noDocument">
                                <p class="card-text">
                                    <input class="form-control input-upload" id="fileUpload" type=file accept="application/pdf" name="file">
                                </p>
                            </div>
						</td>
					</tr>
				</tbody>
			</table>
			<button class="btn btn-primary" id="hide-pdf">Hide PDF</button>
			<div class="hidden" id="treatmentDocument">
				<iframe class="pdfPreview" id="treatmentPDF"></iframe>
			</div>
			<button class="btn btn-primary" id="hide-matching">Hide Image Matching</button>
			<div class="matching-container" id="matching-container">
				<div class="image-matching" id="image-matcher">
					<img class="draggable" src="https://els-jbs-prod-cdn.jbs.elsevierhealth.com/cms/attachment/3a670e84-8cfd-40bb-80ca-3db863b50cc8/gr1.jpg" />
				</div>
			</div>
			
		</div>
	</main>
</div>